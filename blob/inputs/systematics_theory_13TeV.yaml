############################## CATEGORY INDEPENDENT NUISANCES ####################
pdf_Higgs_gg:
    UnTagged: &pdf_Higgs_gg_untagged
        type : lnN
        ggH: 1.032/0.968
        ggZZ: 1.032/0.968
    VBF1jTagged:
        <<: *pdf_Higgs_gg_untagged
    VBF2jTagged:
        <<: *pdf_Higgs_gg_untagged
    VHLeptTagged:
        <<: *pdf_Higgs_gg_untagged
    VHHadrTagged:
        <<: *pdf_Higgs_gg_untagged
    ttHTagged:
        <<: *pdf_Higgs_gg_untagged
    VHMETTagged:
        <<: *pdf_Higgs_gg_untagged

pdf_Higgs_qq:
    UnTagged: &pdf_Higgs_qq_untagged
        type : lnN
        qqH: 1.021/0.979
        WH_lep: 1.019/0.981
        WH_had: 1.019/0.981
        ZH_lep: 1.019/0.981
        ZH_had: 1.019/0.981
        # WH_had: 1.019/0.981
        # ZH_lep: 1.016/0.984
        # ZH_had: 1.016/0.984
    VBF1jTagged:
        <<: *pdf_Higgs_qq_untagged
    VBF2jTagged:
        <<: *pdf_Higgs_qq_untagged
    VHLeptTagged:
        <<: *pdf_Higgs_qq_untagged
    VHHadrTagged:
        <<: *pdf_Higgs_qq_untagged
    ttHTagged:
        <<: *pdf_Higgs_qq_untagged
    VHMETTagged:
        <<: *pdf_Higgs_qq_untagged

pdf_Higgs_ttH:
    UnTagged: &pdf_Higgs_ttH_untagged
        type : lnN
        ttH: 1.036/0.964
    VBF1jTagged:
        <<: *pdf_Higgs_ttH_untagged
    VBF2jTagged:
        <<: *pdf_Higgs_ttH_untagged
    VHLeptTagged:
        <<: *pdf_Higgs_ttH_untagged
    VHHadrTagged:
        <<: *pdf_Higgs_ttH_untagged
    ttHTagged:
        <<: *pdf_Higgs_ttH_untagged
    VHMETTagged:
        <<: *pdf_Higgs_ttH_untagged

pdf_qq:
    UnTagged: &pdf_qq_untagged
        type : lnN
        qqZZ: 1.030804709/0.966207855
    VBF1jTagged:
        <<: *pdf_qq_untagged
    VBF2jTagged:
        <<: *pdf_qq_untagged
    VHLeptTagged:
        <<: *pdf_qq_untagged
    VHHadrTagged:
        <<: *pdf_qq_untagged
    ttHTagged:
        <<: *pdf_qq_untagged
    VHMETTagged:
        <<: *pdf_qq_untagged

# pdf_Higgs_gg_cat: 
#     UnTagged: 
#         type : lnN
#         ggH: 1.000178059/0.999858457
#         ggZZ: 1.000178059/0.999858457
#     VBF2jTagged:
#         type : lnN
#         ggH: 0.998792053/1.000931746
#         ggZZ: 0.998792053/1.000931746
#     VBF1jTagged:
#         type : lnN
#         ggH: 0.999583443/1.000327534
#         ggZZ: 0.999583443/1.000327534
#     VHLeptTagged:
#         type : lnN
#         ggH: 1.00042865/0.999761539
#         ggZZ: 1.00042865/0.999761539
#     VHHadrTagged:
#         type : lnN
#         ggH: 0.999946525/1.000146293
#         ggZZ: 0.999946525/1.000146293
#     ttHTagged:
#         type : lnN
#         ggH: 0.995027263/1.003833611
#         ggZZ: 0.995027263/1.003833611
#     VHMETTagged: 
#         type : lnN
#         ggH: 0.999552312/1.000193151
#         ggZZ: 0.999552312/1.000193151

# pdf_Higgs_qq_cat: 
#     UnTagged: 
#         type : lnN
#         qqH: 1.000018483/0.999999065
#         WH_lep: 1.054215351/0.98932628
#         WH_had: 1.054215351/0.98932628
#         ZH_lep: 1.000406249/0.999967347
#         ZH_had: 1.000406249/0.999967347
#     VBF2jTagged:
#         type : lnN
#         qqH: 1.00147159/0.997405387
#         WH_lep: 1.024149949/0.96256983
#         WH_had: 1.024149949/0.96256983
#         ZH_lep: 0.995572156/1.005198913
#         ZH_had: 0.995572156/1.005198913
#     VBF1jTagged:
#         type : lnN
#         qqH: 1.000071538/0.999815539
#         WH_lep: 1.043610864/0.99542375
#         WH_had: 1.043610864/0.99542375
#         ZH_lep: 1.002744965/0.997198544
#         ZH_had: 1.002744965/0.997198544
#     VHLeptTagged:
#         type : lnN
#         qqH: 0.997956309/1.002255956
#         WH_lep: 1.044172456/0.94809336
#         WH_had: 1.044172456/0.94809336
#         ZH_lep: 1.000065148/0.999718687
#         ZH_had: 1.000065148/0.999718687
#     VHHadrTagged:
#         type : lnN
#         qqH: 0.999269585/1.000871171
#         WH_lep: 1.037160233/0.95151091
#         WH_had: 1.037160233/0.95151091
#         ZH_lep: 1.000086644/0.999593923
#         ZH_had: 1.000086644/0.999593923
#     ttHTagged:
#         type : lnN
#         qqH: 1.011384517/0.985173449
#         WH_lep: 1.050875934/0.90721587
#         WH_had: 1.050875934/0.90721587
#         ZH_lep: 0.993004358/1.008652628
#         ZH_had: 0.993004358/1.008652628
#     VHMETTagged: 
#         type : lnN
#         qqH: 0.994147507/1.007829537
#         WH_lep: 1.019578673/0.95446366
#         WH_had: 1.019578673/0.95446366
#         ZH_lep: 0.997524323/1.000141288
#         ZH_had: 0.997524323/1.000141288

# pdf_Higgs_ttH_cat: 
#     UnTagged: 
#         type : lnN
#         ttH: 1.001012696/1.000022779
#     VBF2jTagged:
#         type : lnN
#         ttH: 1.006602299/0.993807563
#     VBF1jTagged:
#         type : lnN
#         ttH: 1.012151426/0.986549315
#     VHLeptTagged:
#         type : lnN
#         ttH: 1.001122233/0.999165869
#     VHHadrTagged:
#         type : lnN
#         ttH: 0.995472846/1.003864948
#     ttHTagged:
#         type : lnN
#         ttH: 0.999794845/0.999995059
#     VHMETTagged: 
#         type : lnN
#         ttH: 0.997273335/1.00251591

# pdf_qq_cat: 
#     UnTagged: 
#         type : lnN
#         qqZZ: 1.000018483/0.999999065
#     VBF2jTagged:
#         type : lnN
#         qqZZ: 1.00147159/0.997405387
#     VBF1jTagged:
#         type : lnN
#         qqZZ: 0.994147507/1.007829537
#     VHLeptTagged:
#         type : lnN
#         qqZZ: 0.997956309/1.002255956
#     VHHadrTagged:
#         type : lnN
#         qqZZ: 0.999269585/1.000871171
#     ttHTagged:
#         type : lnN
#         qqZZ: 1.011384517/0.985173449
#     VHMETTagged: 
#         type : lnN
#         qqZZ: 0.994147507/1.007829537

BR_hzz:
    Any: 
        type : lnN
        ggH: 1.02
        qqH: 1.02
        WH_had: 1.02
        WH_lep: 1.02
        ZH_had: 1.02
        ZH_lep: 1.02
        ttH: 1.02
############################

QCDscale_ggH:
    UnTagged: &QCDscale_ggH_untagged
        type : lnN
        ggH: 1.039/0.961
        ggZZ: 1.039/0.961
    VBF1jTagged:
        <<: *QCDscale_ggH_untagged
    VBF2jTagged:
        <<: *QCDscale_ggH_untagged
    VHLeptTagged:
        <<: *QCDscale_ggH_untagged
    VHHadrTagged:
        <<: *QCDscale_ggH_untagged
    ttHTagged:
        <<: *QCDscale_ggH_untagged
    VHMETTagged:
        <<: *QCDscale_ggH_untagged

QCDscale_qqH:
    UnTagged: &QCDscale_qqH_untagged
        type : lnN
        qqH: 1.004/0.997
    VBF1jTagged:
        <<: *QCDscale_qqH_untagged
    VBF2jTagged:
        <<: *QCDscale_qqH_untagged
    VHLeptTagged:
        <<: *QCDscale_qqH_untagged
    VHHadrTagged:
        <<: *QCDscale_qqH_untagged
    ttHTagged:
        <<: *QCDscale_qqH_untagged
    VHMETTagged:
        <<: *QCDscale_qqH_untagged

# QCDscale_VH:
#     UnTagged: &QCDscale_VH_untagged
#         type : lnN
#         WH_lep: 1.005/0.993
#         WH_had: 1.005/0.993
#         ZH_lep: 1.038/0.969
#         ZH_had: 1.038/0.969
#     VBF1jTagged:
#         <<: *QCDscale_VH_untagged
#     VBF2jTagged:
#         <<: *QCDscale_VH_untagged
#     VHLeptTagged:
#         <<: *QCDscale_VH_untagged
#     VHHadrTagged:
#         <<: *QCDscale_VH_untagged
#     ttHTagged:
#         <<: *QCDscale_VH_untagged
#     VHMETTagged:
#         <<: *QCDscale_VH_untagged

QCDscale_ttH:
    UnTagged: &QCDscale_ttH_untagged
        type : lnN
        ttH: 1.058/0.908
    VBF1jTagged:
        <<: *QCDscale_ttH_untagged
    VBF2jTagged:
        <<: *QCDscale_ttH_untagged
    VHLeptTagged:
        <<: *QCDscale_ttH_untagged
    VHHadrTagged:
        <<: *QCDscale_ttH_untagged
    ttHTagged:
        <<: *QCDscale_ttH_untagged
    VHMETTagged:
        <<: *QCDscale_ttH_untagged   

# QCDscale_ggH_cat:
#     UnTagged: 
#         type : lnN
#         ggH: 1.009092524/0.992717329
#         ggZZ: 1.009092524/0.992717329
#     VBF2jTagged:
#         type : lnN
#         ggH: 1.06737571/0.88449393
#         ggZZ: 1.06737571/0.88449393
#     VBF1jTagged:
#         type : lnN
#         ggH: 1.089540498/0.900170942
#         ggZZ: 1.089540498/0.900170942
#     VHLeptTagged:
#         type : lnN
#         ggH: 1.053559907/0.832379661
#         ggZZ: 1.053559907/0.832379661
#     VHHadrTagged:
#         type : lnN
#         ggH: 1.073511934/0.905584306
#         ggZZ: 1.073511934/0.905584306
#     ttHTagged:
#         type : lnN
#         ggH: 1.242752249/0.708495503
#         ggZZ: 1.242752249/0.708495503
#     VHMETTagged: 
#         type : lnN
#         ggH: 1.131233887/0.676584911
#         ggZZ: 1.131233887/0.676584911

# QCDscale_qqH_cat:
#     UnTagged:
#         type : lnN
#         qqH: 1.034088947/0.964547219
#     VBF2jTagged:
#         type : lnN
#         qqH: 1.025922799/0.972117284
#     VBF1jTagged:
#         type : lnN
#         qqH: 1.027918646/0.980505887
#     VHLeptTagged:
#         type : lnN
#         qqH: 1.155499212/0.767080219
#     VHHadrTagged:
#         type : lnN
#         qqH: 1.043594386/0.933790688
#     ttHTagged:
#         type : lnN
#         qqH: 1.154594762/0.915906142
#     VHMETTagged:
#         type : lnN
#         qqH: 1.2435771/0.866493751

# QCDscale_VH_cat:
#     UnTagged: 
#         type : lnN
#         WH_lep: 1.056611205/0.984120538
#         WH_had: 1.056611205/0.984120538
#         ZH_lep: 1.003033406/0.939581211
#         ZH_had: 1.003033406/0.939581211
#     VBF2jTagged:
#         type : lnN
#         WH_lep: 1.074539476/0.951109043
#         WH_had: 1.074539476/0.951109043
#         ZH_lep: 1.291328362/0.821123958
#         ZH_had: 1.291328362/0.821123958
#     VBF1jTagged:
#         type : lnN
#         WH_lep: 1.043610864/0.978083572
#         WH_had: 1.043610864/0.978083572
#         ZH_lep: 1.041550355/0.96524417
#         ZH_had: 1.041550355/0.96524417
#     VHLeptTagged:
#         type : lnN
#         WH_lep: 1.043258197/0.944495131
#         WH_had: 1.043258197/0.944495131
#         ZH_lep: 1.076016385/0.964289686
#         ZH_had: 1.076016385/0.964289686
#     VHHadrTagged:
#         type : lnN
#         WH_lep: 1.026976241/0.958128264
#         WH_had: 1.026976241/0.958128264
#         ZH_lep: 1.090249477/0.98707345
#         ZH_had: 1.090249477/0.98707345
#     ttHTagged:
#         type : lnN
#         WH_lep: 1.084967721/0.898765553
#         WH_had: 1.084967721/0.898765553
#         ZH_lep: 1.080775046/0.616960793
#         ZH_had: 1.080775046/0.616960793
#     VHMETTagged: 
#         type : lnN
#         WH_lep: 1.024869373/0.964524865
#         WH_had: 1.024869373/0.964524865
#         ZH_lep: 1.036337515/0.831634367
#         ZH_had: 1.036337515/0.831634367

# QCDscale_ttH_cat:
#     UnTagged: 
#         type : lnN
#         ttH: 1.102267051/0.992655446
#     VBF2jTagged:
#         type : lnN
#         ttH: 1.21068995/0.924246698
#     VBF1jTagged:
#         type : lnN
#         ttH: 1.345115851/0.115732302
#     VHLeptTagged:
#         type : lnN
#         ttH: 1.018909772/0.747090197
#     VHHadrTagged:
#         type : lnN
#         ttH: 1.128398935/0.857735073
#     ttHTagged:
#         type : lnN
#         ttH: 1.039511502/0.954218047
#     VHMETTagged: 
#         type : lnN
#         ttH: 1.396804422/0.48339098

# QCDscale_ggZH:
#     UnTagged: &QCDscale_ggZH_untagged
#         type : lnN
#         ZH: 1.0322/0.9450 #  subtract in quadrature the WH from the full ZH (and basically get full ZH), unchanged since Moriond
#     VBF2jTagged:
#         <<: *QCDscale_ggZH_untagged
#     VBF1jTagged:
#         <<: *QCDscale_ggZH_untagged
#     VHLeptTagged:
#         <<: *QCDscale_ggZH_untagged
#     VHHadrTagged:
#         <<: *QCDscale_ggZH_untagged
#     ttHTagged:
#         <<: *QCDscale_ggZH_untagged
#     VHMETTagged:
#         <<: *QCDscale_ggZH_untagged

QCDscale_VV:
    UnTagged: &QCDscale_VV_untagged
        type : lnN
        qqZZ: 1.031846959/0.958230017
    VBF1jTagged:
        <<: *QCDscale_VV_untagged
    VBF2jTagged:
        <<: *QCDscale_VV_untagged
    VHLeptTagged:
        <<: *QCDscale_VV_untagged
    VHHadrTagged:
        <<: *QCDscale_VV_untagged
    ttHTagged:
        <<: *QCDscale_VV_untagged
    VHMETTagged:
        <<: *QCDscale_VV_untagged   


EWcorr_VV:
    UnTagged: &EWcorr_VV_untagged
        type : lnN
        qqZZ: 1.0012/0.998798
    VBF1jTagged:
        <<: *EWcorr_VV_untagged
    VBF2jTagged:
        <<: *EWcorr_VV_untagged
    VHLeptTagged:
        <<: *EWcorr_VV_untagged
    VHHadrTagged:
        <<: *EWcorr_VV_untagged
    ttHTagged:
        <<: *EWcorr_VV_untagged
    VHMETTagged:
        <<: *EWcorr_VV_untagged   


# QCDscale_VV_cat:
#     UnTagged: 
#         type : lnN
#         qqZZ: 0.999829451/1.00008703
#     VBF2jTagged:
#         type : lnN
#         qqZZ: 0.997671693/1.002253439
#     VBF1jTagged:
#         type : lnN
#         qqZZ: 1.001567646/0.998554252
#     VHLeptTagged:
#         type : lnN
#         qqZZ: 1.000853087/1.002395011
#     VHHadrTagged:
#         type : lnN
#         qqZZ: 1.002187942/0.998505039
#     ttHTagged:
#         type : lnN
#         qqZZ: 1.034722402/0.98359179
#     VHMETTagged: 
#         type : lnN
#         qqZZ: 1.000347129/1.009620985

# Uncertainty coming from NLO EW corrections to qqZZ, onshell only due to highmass events leaking in
# EWcorr_VV_cat: 
#     UnTagged: 
#         type : lnN
#         qqZZ: 0.999726681/1.000278304
#     VBF2jTagged:
#         type : lnN
#         qqZZ: 1.002237449/0.997750319
#     VBF1jTagged:
#         type : lnN
#         qqZZ: 0.999932336/1.000070863
#     VHLeptTagged:
#         type : lnN
#         qqZZ: 1.014064666/0.985903513
#     VHHadrTagged:
#         type : lnN
#         qqZZ: 0.999968395/1.00002736
#     ttHTagged:
#         type : lnN
#         qqZZ: 1.004159915/0.995832083
#     VHMETTagged: 
#         type : lnN
#         qqZZ: 1.033909591/0.966010862

# Additional uncertainty on ggZZ/WW only due to NNLO (or NLO) QCD K factor
QCDscale_ggVV_bonly:
    UnTagged: &QCDscale_ggVV_untagged
        type : lnN
        ggZZ: 1.10
    VBF1jTagged:
        <<: *QCDscale_ggVV_untagged
    VBF2jTagged:
        <<: *QCDscale_ggVV_untagged
    VHLeptTagged:
        <<: *QCDscale_ggVV_untagged
    VHHadrTagged:
        <<: *QCDscale_ggVV_untagged
    ttHTagged:
        <<: *QCDscale_ggVV_untagged
    VHMETTagged:
        <<: *QCDscale_ggVV_untagged

